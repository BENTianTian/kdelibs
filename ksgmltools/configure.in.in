
SGML_CATALOGS=
USER_SGML_CAT_PATH=

AC_ARG_WITH(sgml-cat,[  --with-sgml-cat=DIR     adds DIR to the search path for SGML catalogs],
[ac_save_IFS=$IFS
  IFS=':'
  for d in $withval ; do
    USER_SGML_CAT_PATH="$USER_SGML_CAT_PATH $d"
  done
  IFS=$ac_save_IFS])

dnl The order of the directories in this list matters
dtd_paths="/usr/share/sgml/sgml-iso-entities-8879.1986 /usr/share/sgml/jade-1.2.1 /usr/share/sgml/docbook/sgml-dtd-3.1 /usr/share/sgml/docbook/dsssl-stylesheets-1.54 /usr/share/sgml /usr/local/share/sgml /etc /etc/sgml /usr/share/sgml /usr/share/sgml/docbk31 $USER_SGML_CAT_PATH"

AC_DEFUN(KDE_FIND_CAT,
[
   AC_FIND_FILE($1, $dtd_paths, CAT)
   if test ! "x$CAT" = "xNO"; then
     SGML_CATALOGS="$SGML_CATALOGS -c $CAT/$1"
   fi
])

dnl The order of the files in this list matters
KDE_FIND_CAT(sgml-docbook-3.1.cat)
KDE_FIND_CAT(iso-entities.cat)
KDE_FIND_CAT(docbook.cat)
KDE_FIND_CAT(nwalsh-modular.cat)
KDE_FIND_CAT(stylesheets.cat)
KDE_FIND_CAT(dsssl.cat)
KDE_FIND_CAT(sgml.catalog)
dnl These three lines were added for the FreeBSD setup together with /usr/local/share/sgml
KDE_FIND_CAT(docbook/3.1/catalog)
KDE_FIND_CAT(jade/catalog)
KDE_FIND_CAT(docbook/dsssl/modular/catalog)
dnl These two lines are added for SuSE
KDE_FIND_CAT(jade_dsl/catalog)
KDE_FIND_CAT(docbkdsl/catalog)

AC_SUBST(SGML_CATALOGS)

dnl this is /opt/teTex on COL, no?
TEX_MF=/usr/share/texmf
AC_SUBST(TEX_MF)

KDE_CATALOG=$prefix
AC_SUBST(KDE_CATALOG)
AC_SUBST(KDE_STYLESHEET)

KDE_FIND_PATH(install-catalog, INSTALL_CATALOG,
	AC_MSG_WARN([no install-catalog found])
)
AC_SUBST(INSTALL_CATALOG)

catdir=$kde_datadir/ksgmltools
AC_SUBST(catdir)

dtddir=$catdir/dtd
AC_SUBST(dtddir)

dnl Don't remove !
dnl AC_OUTPUT(ksgmltools/kdb2html)
