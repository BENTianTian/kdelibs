# install the cmake files

file(GLOB cmakeFiles "${CMAKE_CURRENT_SOURCE_DIR}/*.cmake")

set(module_install_dir /share/apps/cmake/modules )

install_files(${module_install_dir} FILES  kde3init_dummy.cpp.in  kde4init_dummy.cpp.in ${cmakeFiles} )

# the files listed here will be removed by remove_obsoleted_cmake_files.cmake, Alex
set(FILES_TO_REMOVE
 ${CMAKE_INSTALL_PREFIX}${module_install_dir}/FindKDE4.cmake
 ${CMAKE_INSTALL_PREFIX}${module_install_dir}/UsePkgconfig.cmake
 ${CMAKE_INSTALL_PREFIX}${module_install_dir}/FindKDE3.cmake
 ${CMAKE_INSTALL_PREFIX}${module_install_dir}/KDE3Macros.cmake
 ${CMAKE_INSTALL_PREFIX}${module_install_dir}/kde3uic.cmake
 ${CMAKE_INSTALL_PREFIX}${module_install_dir}/kde3init_dummy.cpp.in )

install(SCRIPT ${CMAKE_CURRENT_BINARY_DIR}/remove_files.cmake )

file(WRITE ${CMAKE_CURRENT_BINARY_DIR}/remove_files.cmake "#generated by cmake, dont edit\n\n")
foreach ( _current_FILE ${FILES_TO_REMOVE})
   file(APPEND ${CMAKE_CURRENT_BINARY_DIR}/remove_files.cmake "message(STATUS \"Removing ${_current_FILE}\" )\n" )
   file(APPEND ${CMAKE_CURRENT_BINARY_DIR}/remove_files.cmake "exec_program( ${CMAKE_COMMAND} ARGS -E remove ${_current_FILE} OUTPUT_VARIABLE _dummy)\n" )
endforeach ( _current_FILE)
