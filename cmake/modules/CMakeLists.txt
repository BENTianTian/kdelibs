# install the cmake files

file(GLOB cmakeFiles "${CMAKE_CURRENT_SOURCE_DIR}/*.cmake")

set(module_install_dir ${DATA_INSTALL_DIR}/cmake/modules )

install( FILES  kde4init_dummy.cpp.in kde4_cmake_uninstall.cmake.in ${cmakeFiles} DESTINATION ${module_install_dir}  )

# the files listed here will be removed by remove_obsoleted_cmake_files.cmake, Alex
set(FILES_TO_REMOVE
 ${module_install_dir}/CheckTypeSize.cmake
 ${module_install_dir}/FindKDE3.cmake
 ${module_install_dir}/FindKDE4.cmake
 ${module_install_dir}/FindQtDBus.cmake
 ${module_install_dir}/FindZLIB.cmake
 ${module_install_dir}/KDE3Macros.cmake
 ${module_install_dir}/MacroGetenvWinPath.cmake
 ${module_install_dir}/QtDBusMacros.cmake
 ${module_install_dir}/UsePkgconfig.cmake
 ${module_install_dir}/kde3uic.cmake
 ${module_install_dir}/kde3init_dummy.cpp.in
)

install(SCRIPT ${CMAKE_CURRENT_BINARY_DIR}/remove_files.cmake )

file(WRITE ${CMAKE_CURRENT_BINARY_DIR}/remove_files.cmake "#generated by cmake, dont edit\n\n")
foreach ( _current_FILE ${FILES_TO_REMOVE})
   file(APPEND ${CMAKE_CURRENT_BINARY_DIR}/remove_files.cmake "message(STATUS \"Removing ${_current_FILE}\" )\n" )
   file(APPEND ${CMAKE_CURRENT_BINARY_DIR}/remove_files.cmake "exec_program( ${CMAKE_COMMAND} ARGS -E remove ${_current_FILE} OUTPUT_VARIABLE _dummy)\n" )
endforeach ( _current_FILE)
