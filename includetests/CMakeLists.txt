
if(KDE4_BUILD_TESTS)

# Tests don't need to go into toplevel/bin, they are fine in the current dir.
set(EXECUTABLE_OUTPUT_PATH ${CMAKE_CURRENT_BINARY_DIR} )
include_directories( ${KDE4_KDECORE_INCLUDES} ${CMAKE_SOURCE_DIR}/solid )
set(CMAKE_EXE_LINKER_FLAGS -v ; true )
add_definitions (-DQT_NO_CAST_FROM_ASCII -DQT_NO_CAST_FROM_ASCII)
set(includetest_SRCS main.cpp
phonon_mediaproducerinterface.cpp
phonon_audiooutput.cpp
phonon_ui_videowidget.cpp
phonon_ui_effectwidget.cpp
phonon_ui_seekslider.cpp
phonon_ui_mediacontrols.cpp
phonon_ui_videoplayer.cpp
phonon_ui_factory.cpp
phonon_ui_volumeslider.cpp
phonon_backendinterface.cpp
phonon_objectdescription.cpp
phonon_abstractaudiooutput.cpp
phonon_audiodevice.cpp
phonon_deinterlacefilter.cpp
phonon_abstractmediaproducer.cpp
phonon_audiodataoutput.cpp
phonon_audioeffect.cpp
phonon_base.cpp
phonon_mediaobject.cpp
phonon_videopath.cpp
phonon_videodataoutput.cpp
phonon_brightnesscontrol.cpp
phonon_audioplayer.cpp
phonon_videoeffect.cpp
phonon_avcapture.cpp
phonon_phononnamespace.cpp
phonon_audiooutputinterface.cpp
phonon_bytestream.cpp
phonon_mediaqueue.cpp
phonon_objectdescriptionmodel.cpp
phonon_effect.cpp
phonon_factory.cpp
phonon_backendcapabilities.cpp
phonon_audiodeviceenumerator.cpp
phonon_effectparameter.cpp
phonon_audiopath.cpp
phonon_videoframe.cpp
phonon_volumefadereffect.cpp
phonon_visualization.cpp
phonon_abstractvideooutput.cpp
kparts_historyprovider.cpp
kparts_browserinterface.cpp
kparts_event.cpp
kparts_factory.cpp
kparts_partmanager.cpp
kparts_statusbarextension.cpp
kwallet_client_kwallet.cpp
kross_core_variant.cpp
kross_core_manager.cpp
kross_core_childreninterface.cpp
kross_core_krossconfig.cpp
kross_core_model.cpp
solid_solid_frontendobject.cpp
solid_solid_cdrom.cpp
solid_solid_networkinterface.cpp
solid_solid_capability.cpp
solid_solid_battery.cpp
solid_solid_device.cpp
solid_solid_camera.cpp
solid_solid_devicemanager.cpp
solid_solid_dvbhw.cpp
solid_solid_processor.cpp
solid_solid_portablemediaplayer.cpp
solid_solid_display.cpp
solid_solid_networkhw.cpp
solid_solid_storage.cpp
solid_solid_acadapter.cpp
solid_solid_volume.cpp
solid_solid_audiohw.cpp
solid_solid_networkmanager.cpp
solid_solid_button.cpp
solid_solid_ifaces_cdrom.cpp
solid_solid_ifaces_networkinterface.cpp
solid_solid_ifaces_capability.cpp
solid_solid_ifaces_battery.cpp
solid_solid_ifaces_authentication.cpp
solid_solid_ifaces_device.cpp
solid_solid_ifaces_camera.cpp
solid_solid_ifaces_devicemanager.cpp
solid_solid_ifaces_dvbhw.cpp
solid_solid_ifaces_processor.cpp
solid_solid_ifaces_portablemediaplayer.cpp
solid_solid_ifaces_display.cpp
solid_solid_ifaces_networkhw.cpp
solid_solid_ifaces_storage.cpp
solid_solid_ifaces_acadapter.cpp
solid_solid_ifaces_volume.cpp
solid_solid_ifaces_audiohw.cpp
solid_solid_ifaces_networkmanager.cpp
solid_solid_ifaces_button.cpp
solid_solid_ifaces_opticaldisc.cpp
solid_solid_ifaces_powermanager.cpp
solid_solid_ifaces_wirelessnetwork.cpp
solid_solid_ifaces_network.cpp
solid_solid_ifaces_block.cpp
solid_solid_predicate.cpp
solid_solid_managerbase.cpp
solid_solid_opticaldisc.cpp
solid_solid_powermanager.cpp
solid_solid_wirelessnetwork.cpp
solid_solid_network.cpp
solid_solid_block.cpp
kutils_kpluginselector.cpp
kutils_kmultitabbar.cpp
kutils_ksettings_dialog.cpp
kutils_ksettings_dispatcher.cpp
kutils_kcmoduleinfo.cpp
kdeprint_kmmanager.cpp
kdeprint_kprintdialogpage.cpp
kdeprint_kmprinter.cpp
kdeprint_driver.cpp
kdeprint_kmjob.cpp
kdeprint_kpreloadobject.cpp
kdeprint_management_kmtimer.cpp
kdeprint_kmjobmanager.cpp
kdeprint_kprinter.cpp
kdelibs_export.cpp
kio_kio_kmimetypetrader.cpp
kio_kio_kfilemetainfo.cpp
kio_kio_karchive.cpp
kio_kio_knfsshare.cpp
kio_kio_thumbcreator.cpp
kio_kio_kimageio.cpp
kio_kio_k3mimetyperesolver.cpp
kio_kio_kmimetype.cpp
kio_kio_kdbusservicestarter.cpp
kio_kio_kautomount.cpp
kio_kio_connection.cpp
kio_kio_kremoteencoding.cpp
kio_kio_kfileshare.cpp
kio_kio_kdirwatch.cpp
kio_kio_ksambashare.cpp
kio_kio_safesite.cpp
kio_kio_kdedesktopmimetype.cpp
kio_kio_authinfo.cpp
kio_kio_paste.cpp
kio_kio_kdirnotify.cpp
kio_kio_kmimetyperesolver.cpp
kio_kio_kbuildsycocaprogressdialog.cpp
kio_kio_kemailsettings.cpp
kio_kio_kfilefilter.cpp
kio_kio_kurifilter.cpp
kio_misc_kntlm_kntlm.cpp
kio_bookmarks_kbookmarkimporter_kde1.cpp
kio_bookmarks_kbookmark.cpp
kio_bookmarks_kbookmarkmanager.cpp
kio_bookmarks_kbookmarknotifier.cpp
kio_kfile_kfile.cpp
kio_kfile_kdiskfreesp.cpp
kio_kfile_kpreviewwidgetbase.cpp
kio_kfile_krecentdocument.cpp
kio_kssl_ksslcertificatecache.cpp
kio_kssl_ksslsigners.cpp
kio_kssl_ksslcertificatehome.cpp
kio_kssl_ksslx509map.cpp
kio_kssl_ksslpemcallback.cpp
kio_kssl_ksslx509v3.cpp
kio_kssl_ksslsettings.cpp
kio_kssl_ksslcertificatefactory.cpp
kio_kssl_ksslsession.cpp
kio_kssl_ksslconnectioninfo.cpp
kdefx_kpixmapsplitter.cpp
kdefx_kimageeffect.cpp
kdefx_kstyle.cpp
kdefx_kcpuinfo.cpp
kdefx_kdrawutil.cpp
kdefx_kpixmapeffect.cpp
interfaces_ktexteditor_cursor.cpp
interfaces_ktexteditor_attribute.cpp
interfaces_ktexteditor_configpage.cpp
interfaces_ktexteditor_smartrange.cpp
interfaces_ktexteditor_configinterface.cpp
interfaces_ktexteditor_smartinterface.cpp
interfaces_ktexteditor_templateinterface.cpp
interfaces_ktexteditor_plugin.cpp
interfaces_ktexteditor_rangefeedback.cpp
interfaces_ktexteditor_markinterface.cpp
interfaces_ktexteditor_codecompletionmodel.cpp
interfaces_ktexteditor_commandinterface.cpp
interfaces_ktexteditor_factory.cpp
interfaces_ktexteditor_cursorfeedback.cpp
interfaces_ktexteditor_range.cpp
interfaces_ktexteditor_codecompletioninterface.cpp
interfaces_ktexteditor_smartcursor.cpp
interfaces_kspeech_kspeech.cpp
interfaces_kmediaplayer_view.cpp
interfaces_kimproxy_library_kimproxy.cpp
threadweaver_Weaver_DependencyPolicy.cpp
threadweaver_Weaver_QueuePolicy.cpp
threadweaver_Weaver_State.cpp
threadweaver_Weaver_JobSequence.cpp
threadweaver_Weaver_Thread.cpp
threadweaver_Weaver_ThreadWeaver.cpp
threadweaver_Weaver_WeaverObserver.cpp
threadweaver_Weaver_Job.cpp
threadweaver_Weaver_DebuggingAids.cpp
threadweaver_Weaver_ResourceRestrictionPolicy.cpp
threadweaver_Weaver_WeaverInterface.cpp
threadweaver_Weaver_JobCollection.cpp
kde3support_kdeui_k3wizard.cpp
kde3support_kdeui_k3sconfig.cpp
kde3support_kdeui_k3colordrag.cpp
kde3support_kdeui_k3syntaxhighlighter.cpp
kde3support_kdeui_k3textedit.cpp
kde3support_kdeui_k3spell.cpp
kde3support_kdeui_k3listbox.cpp
kde3support_kdecore_k3multipledrag.cpp
kde3support_kdecore_k3urldrag.cpp
kde3support_kdecore_k3tempfile.cpp
dnssd_servicebase.cpp
dnssd_servicebrowser.cpp
dnssd_remoteservice.cpp
dnssd_query.cpp
dnssd_domainbrowser.cpp
dnssd_publicservice.cpp
knewstuff_engine.cpp
knewstuff_knewstuffsecure.cpp
knewstuff_provider.cpp
knewstuff_knewstuff.cpp
knewstuff_entry.cpp
kjs_ustring.cpp
kjs_identifier.cpp
kjs_PropertyNameArray.cpp
kjs_property_map.cpp
kdesu_process.cpp
kdesu_su.cpp
kdesu_kcookie.cpp
kdesu_stub.cpp
kdesu_ssh.cpp
khtml_khtml_events.cpp
khtml_khtml_settings.cpp
khtml_dom_dom_node.cpp
khtml_dom_dom_misc.cpp
khtml_dom_dom_string.cpp
khtml_dom_dom2_views.cpp
khtml_khtmlview.cpp
kdeui_kernel_ksessionmanager.cpp
kdeui_kernel_kapplication.cpp
kdeui_kernel_kstartupinfo.cpp
kdeui_kernel_kglobalsettings.cpp
kdeui_icons_kicontheme.cpp
kdeui_icons_kicon.cpp
kdeui_icons_kiconeffect.cpp
kdeui_icons_kiconengine.cpp
kdeui_itemviews_klistwidget.cpp
kdeui_itemviews_k3iconview.cpp
kdeui_windowmanagement_netwm_def.cpp
kdeui_windowmanagement_kwinmodule.cpp
kdeui_widgets_kcolorvalueselector.cpp
kdeui_widgets_ksqueezedtextlabel.cpp
kdeui_widgets_kdatetable.cpp
kdeui_widgets_kdialogbuttonbox.cpp
kdeui_widgets_ktabbar.cpp
kdeui_widgets_kseparator.cpp
kdeui_widgets_khbox.cpp
kdeui_widgets_ktextbrowser.cpp
kdeui_widgets_kled.cpp
kdeui_widgets_kdatewidget.cpp
kdeui_widgets_ktabwidget.cpp
kdeui_widgets_kcolorbutton.cpp
kdeui_widgets_kstatusbar.cpp
kdeui_widgets_kanimatedbutton.cpp
kdeui_widgets_karrowbutton.cpp
kdeui_widgets_keditlistbox.cpp
kdeui_widgets_knuminput.cpp
kdeui_widgets_kcolorcombo.cpp
kdeui_widgets_kmenu.cpp
kdeui_widgets_kbuttonbox.cpp
kdeui_widgets_kactionselector.cpp
kdeui_widgets_kfontrequester.cpp
kdeui_widgets_kcmodule.cpp
kdeui_widgets_kstringvalidator.cpp
kdeui_widgets_kdatepicker.cpp
kdeui_widgets_ktoolbar.cpp
kdeui_widgets_kruler.cpp
kdeui_widgets_ktimezonewidget.cpp
kdeui_widgets_kmenubar.cpp
kdeui_widgets_kselector.cpp
kdeui_widgets_kurllabel.cpp
kdeui_widgets_kpixmapregionselectorwidget.cpp
kdeui_widgets_kxyselector.cpp
kdeui_widgets_khelpmenu.cpp
kdeui_widgets_kdatetimewidget.cpp
kdeui_widgets_kbuttongroup.cpp
kdeui_widgets_ktextedit.cpp
kdeui_xmlgui_kxmlguibuilder.cpp
kdeui_xmlgui_kxmlguiclient.cpp
kdeui_xmlgui_kxmlguifactory.cpp
kdeui_xmlgui_kmainwindow.cpp
kdeui_shortcuts_kstandardshortcut.cpp
kdeui_shortcuts_kshortcut.cpp
kdeui_paged_kpageview.cpp
kdeui_paged_kpagewidgetmodel.cpp
kdeui_paged_kpagemodel.cpp
kdeui_actions_kstandardaction.cpp
kdeui_dialogs_kmessageboxmessagehandler.cpp
kdeui_dialogs_ksplashscreen.cpp
kdeui_dialogs_kconfigdialogmanager.cpp
kdeui_util_kxerrorhandler.cpp
kdeui_util_kcrash.cpp
kdeui_util_kpalette.cpp
kdeui_util_kcursor.cpp
kdeui_util_kundostack.cpp
kdeui_util_kxmessages.cpp
kdeui_util_kglobalaccel.cpp
kdeui_util_kacceleratormanager.cpp
kdeui_util_kwordwrap.cpp
kdeui_util_kcolormimedata.cpp
kdeui_util_ksystemtrayicon.cpp
kdeui_util_knotification.cpp
kdeui_util_knotificationrestrictions.cpp
kdeui_util_ksvgrenderer.cpp
kdeui_util_knumvalidator.cpp
kdeui_util_kpixmapprovider.cpp
kdeui_util_kpassivepopup.cpp
kdeui_util_kpassivepopupmessagehandler.cpp
kdeui_util_kstandardguiitem.cpp
kdeui_klanguagebutton.cpp
sonnet_spelling_client.cpp
sonnet_spelling_loader.cpp
sonnet_spelling_speller.cpp
sonnet_misc_settings.cpp
sonnet_misc_filter.cpp
kdecore_kernel_kglobal.cpp
kdecore_kernel_kcmdlineargs.cpp
kdecore_kernel_kaboutdata.cpp
kdecore_kernel_kstandarddirs.cpp
kdecore_kernel_kauthorized.cpp
kdecore_kernel_kautostart.cpp
kdecore_kernel_ktoolinvocation.cpp
kdecore_kernel_kcomponentdata.cpp
kdecore_text_kstringhandler.cpp
kdecore_text_kascii.cpp
kdecore_text_kcodecs.cpp
kdecore_localization_kcharsets.cpp
kdecore_localization_kcatalog.cpp
kdecore_localization_klocale.cpp
kdecore_localization_klocalizedstring.cpp
kdecore_services_kservicetypetrader.cpp
kdecore_services_kplugininfo.cpp
kdecore_services_kservice.cpp
kdecore_services_kservicetype.cpp
kdecore_services_kserviceoffer.cpp
kdecore_services_kservicetypeprofile.cpp
kdecore_network_ksocketdevice.cpp
kdecore_network_kiobuffer.cpp
kdecore_network_kreverseresolver.cpp
kdecore_network_ksockssocketdevice.cpp
kdecore_network_khttpproxysocketdevice.cpp
kdecore_network_kdatagramsocket.cpp
kdecore_network_kresolver.cpp
kdecore_network_kclientsocketbase.cpp
kdecore_network_kbufferedsocket.cpp
kdecore_network_ksocketaddress.cpp
kdecore_network_kserversocket.cpp
kdecore_network_ksocketbase.cpp
kdecore_network_kidna.cpp
kdecore_network_kstreamsocket.cpp
kdecore_compression_kfilterdev.cpp
kdecore_compression_kfilterbase.cpp
kdecore_io_kprocctrl.cpp
kdecore_io_kdebug.cpp
kdecore_io_klockfile.cpp
kdecore_io_ktempdir.cpp
kdecore_io_kmessage.cpp
kdecore_io_kurl.cpp
kdecore_io_ktemporaryfile.cpp
kdecore_io_kmountpoint.cpp
kdecore_io_kautosavefile.cpp
kdecore_io_kprocio.cpp
kdecore_io_kprocess.cpp
kdecore_io_ksavefile.cpp
kdecore_sycoca_ksycocaentry.cpp
kdecore_sycoca_kprotocolinfo.cpp
kdecore_sycoca_ksycoca.cpp
kdecore_date_kcalendarsystem.cpp
kdecore_date_ktimezones.cpp
kdecore_date_kcalendarsystemfactory.cpp
kdecore_date_ktzfiletimezone.cpp
kdecore_date_krfcdate.cpp
kdecore_date_ksystemtimezone.cpp
kdecore_date_kdatetime.cpp
kdecore_util_kpty.cpp
kdecore_util_kuser.cpp
kdecore_util_kgenericfactory.cpp
kdecore_util_kstaticdeleter.cpp
kdecore_util_kshell.cpp
kdecore_util_krandomsequence.cpp
kdecore_util_klauncher_iface.cpp
kdecore_util_kdedmodule.cpp
kdecore_util_kallocator.cpp
kdecore_util_kmacroexpander.cpp
kdecore_util_ktypelist.cpp
kdecore_util_krandom.cpp
kdecore_util_klibloader.cpp
kdecore_util_kdeversion.cpp
kdecore_jobs_kjobuidelegate.cpp
kdecore_jobs_kcompositejob.cpp
kdecore_jobs_kjob.cpp
kdecore_config_kconfigdata.cpp
kdecore_config_kconfigbase.cpp
kdecore_config_kdesktopfile.cpp
kdecore_config_kconfigbackend.cpp
kdecore_config_kconfigini.cpp
kdecore_config_ksharedconfig.cpp
kdecore_config_kconfig.cpp
kdecore_config_kconfiggroup.cpp
kdecore_config_kconfigskeleton.cpp
)
kde4_add_executable(includetest NOGUI ${includetest_SRCS})
endif(KDE4_BUILD_TESTS)

ADD_CUSTOM_TARGET(update DEPENDS ${CMAKE_CURRENT_SOURCE_DIR}/CMakeLists.txt)
add_custom_command(OUTPUT ${CMAKE_CURRENT_SOURCE_DIR}/CMakeLists.txt
                   COMMAND ${CMAKE_CURRENT_SOURCE_DIR}/update.sh ARGS ${CMAKE_BINARY_DIR}/install_manifest.txt
                   DEPENDS ${CMAKE_CURRENT_SOURCE_DIR}/update.sh ${CMAKE_BINARY_DIR}/install_manifest.txt  ${CMAKE_CURRENT_SOURCE_DIR}/blacklist.txt
                   WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR})

