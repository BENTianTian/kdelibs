<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<TITLE>The KDE Daemon: KNaming</TITLE>
<META HTTP-EQUIV="content-type" CONTENT="text/html; charset=iso-8859-1">
<META NAME="keywords" CONTENT="KDE Daemon CORBA MICO">
<META NAME="description" CONTENT="KDE Daemon Documentation">
</HEAD>
<BODY BGCOLOR="#ffffff" LINK="#aa0000" TEXT="#000000" > 
<FONT FACE="Helvetica">
<A HREF="http://www.kde.org/"><IMG SRC="logotp3.gif" BORDER="0" ALT="The K Desktop Environment"></A>
<HR WIDTH="100%" SIZE=2 ALIGN="CENTER" NOSHADE>

 
<P ALIGN="RIGHT">

Next <A HREF="index-4.html">Previous</A>
 <A HREF="index.html#toc5">Table of Contents</A>
</P>
<H3><A NAME="s5">5. KNaming</A></H3>

<P>The KDE Naming Service, KNaming, is also a very simple service, but it's pretty
useful and in some cases a very nice solution to make a CORBA client connect to
a persistent CORBA server.
<P>
<P>With KNaming you can bind a freely chooseable name to a CORBA object. And since
kded is system (session) wide available, your object becomes available for any
client which is able to connect to kded.
<P>
<P>There's not much to explain here :-} , so I suggest having a look at the KNaming
API, in knaming.h .
<P>
<P>Example code can be, again, found in kdelibs/corba/tutorials/kded . Here's just
a short real example situation:
<P>
<P>Just think of KDesktop, that nice app providing your background desktop icons.
It provides some functionality via CORBA, just have a look at kdesktop.idl to
see what I'm talking about. Now the problem for KDesktop is: How can it provide
this service to other apps in the system? Writing an IOR into some file is no
clean solution IMHO, and using KActiator doesn't work because KDesktop does not
get started by kded but by the startkde script on KDE startup. So we find a better
way and make KDesktop register it's object at KNaming. This is done by the following
lines:
<PRE>
  ...
  KNaming *knaming = KdedInstance::self()->knaming();
  naming->bind( "KDesktop", kdesktop_object_here );
  ...
</PRE>

Well, I told you a lie ;) : KNaming does not really bind to "KDesktop" but
instead to "IDL:KDesktopIf:1.0" , but since there's no naming convention
for the naming I have choosen a more readable name, IMHO of course :-) (don't
mind me David :] ) . I personally prefer human readable names ;) , in contrary 
to repository ids with tags.
<P>
<P>Back to KNaming and KDesktop: Now any client application, kfmclient for example,
can "connect" to KDesktop. Just like this:
<PRE>
  ..
  KNaming *knaming = KdedInstance::self()->knaming();
  ...
  CORBA::Object_var obj = knaming->resolve( "KDesktop" );
  KDesktopIf_var kdesky = KDesktopIf::_narrow( obj );
  kdesky->selectAll(); //let's confuse the user by selecting all icons ;-)
  ...
</PRE>
<P>
<P>
<P ALIGN="RIGHT">

Next <A HREF="index-4.html">Previous</A>
 <A HREF="index.html#toc5">Table of Contents</A>
</P>
<CENTER>
<HR WIDTH="100%" SIZE=3 ALIGN=CENTER NOSHADE>
</CENTER>    
</FONT>

 
</BODY>
</HTML>
