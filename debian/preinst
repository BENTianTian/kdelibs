#! /bin/sh
# preinst script for kdelibs
#
# see: dh_installdeb(1)

set -e

case "$1" in
    install)
      if [ -e /usr/share/applnk -a ! -L /usr/share/applnk ]; then
        rm -rf /usr/share/applnk > /dev/null 2>&1
      fi
    ;;
    upgrade)
      if [ -e /etc/kde2/applnk -a ! -L /etc/kde2/applnk ]; then
        if [ -e /usr/share/applnk -a ! -L /usr/share/applnk ]; then
          rm -rf /usr/share/applnk > /dev/null 2>&1
          ln -s /etc/kde2/applnk /usr/share/applnk >/dev/null 2>&1
        else
          mv /usr/share/applnk /etc/kde2/applnk >/dev/null 2>&1
          ln -s /etc/kde2/applnk /usr/share/applnk >/dev/null 2>&1
        fi
      else
        if [ -e /usr/share/applnk -a ! -L /usr/share/applnk ]; then
          mv /usr/share/applnk /etc/kde2/applnk >/dev/null 2>&1
          ln -s /etc/kde2/applnk /usr/share/applnk >/dev/null 2>&1
        fi
      fi
      if [ -e /usr/share/applnk/applnk ]; then
          rm -rf /usr/share/applnk/applnk >/dev/null 2>&1
      fi
    ;;

    abort-upgrade)
    ;;

    *)
        echo "preinst called with unknown argument \`$1'" >&2
        exit 0
    ;;
esac

# dh_installdeb will replace this with shell code automatically
# generated by other debhelper scripts.

#KDEHELPER#
#DEBHELPER#

exit 0


