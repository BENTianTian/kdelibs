dnl libkmid's specific checks
AC_MSG_CHECKING(if libkmid would compile)
AC_CACHE_VAL(kde_libkmid_compiles,
[
AC_TRY_COMPILE([
#ifndef __FreeBSD__
#include <sys/soundcard.h>
#else
#include <machine/soundcard.h>
#endif
],
[
],
  kde_libmid_compiles=yes,
kde_libmid_compiles=no)
])
AC_MSG_RESULT($kde_libmid_compiles)
if test $kde_libmid_compiles = no; then
  DO_NOT_COMPILE="$DO_NOT_COMPILE libkmid"
fi

#AC_ARG_ENABLE(alsa, 
#[  --enable-alsa    Turn on alsa support], 
#[case "${enableval}" in 
#yes) alsa=true ;; 
#no)  alsa=false ;; 
#*) AC_MSG_ERROR(bad value ${enableval} for --enable-alsa) ;; 
#esac],[alsa=false]) 

AC_DEFUN(AC_CHECK_LIBASOUND,
[
  ac_ldflags_save="$LDFLAGS"
  LDFLAGS="$all_libraries $LDFLAGS"
  AC_CHECK_HEADER(sys/asoundlib.h,
  [
    AC_CHECK_LIB(asound,snd_seq_open,[
      alsa=true
      LIBASOUND="-lasound"
      AC_DEFINE(HAVE_LIBASOUND, 1,
        [Define if you have libasound (required for alsa support)])
    ], [
      alsa=false
    ])
  ])
  AC_SUBST(LIBASOUND)
  LDFLAGS="$ac_ldflags_save"
])

#AM_CONDITIONAL(HAVE_ALSA, test x$alsa = xtrue) 

AC_CHECK_HEADERS(linux/awe_voice.h awe_voice.h /usr/src/sys/i386/isa/sound/awe_voice.h /usr/src/sys/gnu/i386/isa/sound/awe_voice.h)  

AC_CHECK_LIBASOUND

