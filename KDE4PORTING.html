<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><HTML><HEAD>
<TITLE>Guide to Porting Applications to KDE 4.0</TITLE>
</HEAD>
<BODY>

<h2>Note</h2>
<p>Before the changes were made kdelibs has been branched to branches/work/kdelibs4_snapshot. You should use that one if you're not interested in developing kdelibs. Expect trunk/KDE/kdelibs to be broken at any random time (for now).  For the time being other kde modules should not develop against kdelibs, but use the branch.</p>

<H2>Porting Applications to KDE 4.0</H2>
<p>This document contains the changes you have to apply to programs written for
KDE 3.x when you want to port them to KDE 4.0.<br>
As a start you should have a look at doc/porting.doc in the Qt package,
or <a href="http://doc.trolltech.com/4.0/porting4.html">this page online</a>.</p>

<H3><A NAME="TOC">Table of Contents</A></H3>

<UL>
<LI><A HREF="#gettingstarted">Getting Started</A></LI>
<LI><A HREF="#kab">Changes in kab</A></LI>
<LI><A HREF="#kdecore">Changes in kdecore</A></LI>
<LI><A HREF="#kdeui">Changes in kdeui</A></LI>
<LI><A HREF="#kio">Changes in kio</A></LI>
<LI><A HREF="#kparts">Changes in kparts</A></LI>
<LI><A HREF="#kded">Changes in kded</A></LI>
<LI><A HREF="#kspell">Changes in kspell</A></LI>
<LI><A HREF="#khtmlpart">API-cleanup in KHTML</A></LI>
<LI><A HREF="#kfile">Changes in kfile</A></LI>
<LI><A HREF="#kcontrol">KDE Control Center</A></LI>
<LI><A HREF="#kicker">Panel Applets and Extensions</A></LI>
<li><a href="#kscreensaver">KScreensaver</a></li>
</UL>

<H3><A NAME="gettingstarted">Getting started</A></H3>

<H4 ALIGN="RIGHT"><A HREF="#TOC">Return to the Table of Contents</A></H4>

<H3><A NAME="kab">Changes in kab</A></H3>


<H4 ALIGN="RIGHT"><A HREF="#TOC">Return to the Table of Contents</A></H4>

<H3><A NAME="kdecore">Changes in kdecore</A></H3>


<H4>Header file names</H4>
<ul>
<li>kuniqueapp.h =&gt; kuniqueapplication.h</li>
<li>klargefile.h =&gt; kde_file.h</li>
<li>kcatalogue.h =&gt; kcatalog.h</li>
<li>kaccelmanager.h =&gt; kacceleratormanager.h</li>
</ul>


<H4>KCompletion</H4>
<ul>
<li>enableSounds() was removed, use setEnableSounds()</li>
<li>disableSounds() was removed, use setEnableSounds()</li>
</ul>

<H4>KGlobalSettings</H4>
<ul>
<li> deprecated &quot;static QString trashPath()&quot; has been removed. use KIO::trash instead</li>
</ul>

<H4>KAccel</H4>
<ul>
<li>Removed methods that were marked deprecated from KDE2</li>
</ul>

<H4>KAccelBase</H4>
<ul>
<li>insert() only takes one KShortcut "default" argument now instead of two</li>
</ul>

<H4>KAccelAction</H4>
<ul>
<li>KDE3 supported 3 modifier key shortcuts and 4 modifier key (3+META) shortcuts, because earlier versions of Qt3 didn't
    support a META modifier/WIN key.  This is changed, so now all shortcuts can be 4 modifier key.  All instances of
    shortcut3 and shortcut4 have been reduced just to "shortcut".</li>
<li>The constructor, init(), and insert() functions now only take only KShortcut "default" argument instead of two</li>
<li>Removed shortcutDefault3() and shortcutDefault4().  Use shortcutDefault() instead</li>
</ul>

<H4>KApplication</H4>
<ul>
<li>kapp-&gt;keyboardMouseState() has been removed, its functionality is now provided
by QApplication::keyboardModifiers() and QApplication::mouseButtons()</li>
<li>random() has been moved to the KRandom class</li>
<li>For using the kiosk restriction/authorization system you have to use the functions provided in KAuthorized now</li>
<li>invoke* has been moved to ktoolinvocation. there are static methods invoke*, if you want to use slots as before connect to the innvoke* slots of KToolInvocation::self()</li>
<li>startService*, kdeinitExec* -&gt; KToolInvocation</li>
<li> static void addCmdLineOptions(); moveto KCmdLineArgs::addStdCmdLineOptions </li>
<li>kapp-&gt;getDisplay() has been removed, its functionality is now provided
by QX11Info::display()</li>
<li>cut,copy,paste, clear and selectAll were moved to KStdAction</li>
<li>guiEnabled() was removed, QApplication::type() should be used instead.</li>
<li>geometryArgument was removed, please use:
<pre>
 QString geometry;
 KCmdLineArgs *args = KCmdLineArgs::parsedArgs("kde");
 if (args &amp;&amp; args-&gt;isSet("geometry"))
	geometry = args-&gt;getOption("geometry");
</pre>
</li>
<li>installSigpipeHandler() was removed.</li>
<li>propagateSessionManager() and requestShutDown() have been moved into the kworkspace library (kdebase/workspace/lib).</li>
<li>The shutDown() signal has been removed, use QApplication's signal aboutToQuit()</li>
<li>enableStyles(), disableStyles(), and the constructor argument has been removed.</li>
</ul>

<H4>KCatalogue</H4>
<ul>
<li>Has been renamed to KCatalog. Method name parts with "catalogue" have been also renamed to contain "catalog".
</ul>

<H4>KCodecs</H4>
<ul>
<li>All methods using a QCString removed. The methods use QByteArray now. </li>
<li>Header renamed to kcodecs.h</li>
</ul>

<H4>KConfigBackend</H4>
<ul>
<li>Removed filename(), use fileName()</li>
</ul>

<H4>KConfigBase</H4>
<ul>
<li>all read*Entry methods deprecated, use <b>template &lt;typename T&gt; readEntry(key, const T&amp;)</b>. 
This uses QVariant in the background so only types that QVariant can convert to QString work. The use of QVariant allows some ambiguous conversions, so it might be necessary to use <em>explicit</em> construction to dis-ambiguate the type wanted, i.e.
 <ul>
		 <li>bool var = readEntry(key, <b>false</b>);</li>
		 <li>int var = readEntry(key, <b>int(SomeEnumValue)</b>);</li>
                 <li>QColor var = readEntry(key, QColor(<b>Qt::black</b>)); // no conversion from Qt::GlobalColor to QVariant
		 <li>long var = readEntry(key, <b>0</b>); // conversion from long to QVariant is ambiguous, so can't use <b>long(0)</b>.</li>
 </ul>
</li>
<li>readEntry(const QString&amp;, const QString&amp;) no longer has a default argument, add QString() as
second argument.
</li>
<li>all writeEntry* methods removed, mostly not noticeable, but some types don't automatically convert
to QVariant. You need to cast to a type that is directly convertible to QVariant. i.e.
<pre>
time_t timeVal;
writeEntry("someKey", timeVal); // ambiguous conversion
writeEntry("someKey", int(timeVal)); // ok
</pre>
</li>
<li>all read*ListEntry methods deprecated, renamed to readEntry. Most types use the template version.<br/>
<b>template &lt;typename T&gt; readEntry(key, const QList&lt;T&gt;&amp;)</b><br/>If you just write readEntry(key, list) it should work for any type that QVariant can convert to QString.
</li>
<li>writeEntry, deleteGroup, and deleteEntry doesn't take anymore severals boolean options (persistent,global,localized), but one QFlags</li>
</ul>
<H4>KLibFactory</H4>

<H4>KMacroExpander</H4>
<ul>
<li>KMacroExpander now takes a QHash and not a QMap</li>
</ul>

<H4>NETRootInfo</H4>
<ul>
<li>NETRootInfo(Display *display, Window supportWindow, const char *wmName,unsigned long properties, int screen = -1, bool doActivate = true) -&gt;
    NETRootInfo(Display *display, Window supportWindow, const char *wmName,
                const unsigned long properties[], int properties_size,
                int screen = -1, bool doActivate = true);     old properties is the first element of the new array
</li>
<li>unsigned long supported() -&gt;   const unsigned long* supportedProperties() const;</li>
<li>    unsigned long properties() const -&gt; gone</li>
<li> WindowType windowType() -&gt;     WindowType windowType( unsigned long supported_types ) const;</li>
</ul>

<H4>KDesktopFile</H4>
<ul>
<li>QString filename() const -&gt; QString fileName() const</li>
<li>more standards compliant. See
<a href="http://www.freedesktop.org/Standards/desktop-entry-spec/latest">
Desktop Entry Spec</a>
 <ul>
  <li>.kdelnk files are no longer supported, rename to .desktop.</li>
  <li>deprecated header [KDE Desktop Entry], change to [Desktop Entry]</li>
  <li>type FSDev is no longer supported, change to FSDevice</li>
 </ul>
</li>
</ul>

<H4>KExtendedSocket</H4>
<ul>
<li>This class has been removed. Use KNetwork::KStreamSocket or KNetwork::KServerSocket instead.</li>
</ul>

<H4>KGlobalAccel</H4>
<ul>
<li>bool useFourModifierKeys() has been removed (we always use four modifier keys now).</li>
<li>The constructor only takes one KShortcut "default" argument now instead of two.</li>
</ul>

<H4>KKey</H4>
<ul>
<li>The QtWIN enum has been removed.  Use Qt::META or Qt::MetaModifier instead.</li>
</ul>

<H4>KKeySequence</H4>
<ul>
<li>Is being phased out.  It was originally created to hold multiple key sequence before
   QKeySequence could support it (Qt 3.0). You should use QKeySequence instead.
   A K3KeySequence convenience class is also available.
</li>
</ul>

<H4>KKeyNative</H4>
<ul>
<li>modX(ModFlags) is now a direct function call.  IE, modX(KKey::WIN) -&gt; modXWin()</li>
</ul>

<H4>KNotifyClient</H4>
<ul><li>Replaced by KNotification.  The API is quite similar, but the config file need to be updated. See KNotification documentation</li></ul>

<H4>KPalette</H4>
<ul>
<li>color(int), colorName(int) and colorName(const QColor&amp;) have been made const.</li>
</ul>

<H4>KProcess</h4>
<ul>
<li>setExecutable() was removed in favor of using operator &lt;&lt; </li>
<li>getPid() was removed for just pid()</li>
</ul>

<H4>KPixmapSplitter</H4>

<H4>KRegExp</H4>
<ul>
<li>This class has been removed.  Use QRegExp instead</li>
</ul>

<H4>KShortcut</H4>
<ul>
<li>Is being phased out.  A K3Shortcut class is available.  Watch here for more info.</li>
</ul>

<H4>KStringHandler</H4>
<ul>
<li>static QString ljust( const QString &amp;text , int width ) -&gt; QString::leftJustified</li>
<li>static QString rjust( const QString &amp;text , int width ) -&gt; QString::rightJustified</li>
<li>matchFilename -&gt; matchFileName</li>
<li>static QString word( const QString &amp;text , int pos ) -&gt; QString::section </li>
<li>::randomString() has been moved to KRandom::randomString()</li>
</ul>

<H4>KStdAccel</H4>
<ul>
<li>Removed deprecated methods</li>
<li>Removed WhatThis, use WhatsThis</li>
<li>shortcutDefault3() and shortcutDefault4() have been removed, use shortcutDefault() instead</li>
</ul>

<H4>KStyle</H4>

<H4>KTempDir</H4>
<ul>
<li>existing() was removed, use exists() instead</li>
</ul>

<H4>KURL</H4>
<ul>
<li>Has been renamed to KUrl, but a typedef is available for source compatibility</li>
<li>filename() has been removed, use fileName() instead</li>
<li>isMalformed -&gt; !isValid()</li>
<li>htmlURL() had to be removed, please use Qt::escape(url.prettyURL()) now, with #include &lt;QTextDocument&gt;.
This requires libQtGui, which is why it can't be in KUrl anymore.</li>
</ul>

<H4>KURLDrag</H4>
<ul>
<li>This class has been moved to kde3support. Use KUrl::populateMimeData() and
KUrl::List::populateMimeData() in the drag/copy side,
and the static methods KUrl::List::canDecode() and KUrl::List::fromMimeData()
in the drop/paste side.<br>
Example: Replace <pre>  KURL::List uriList;
  if ( KURLDrag::canDecode(e) &amp;&amp; KURLDrag::decode( e, uriList ) ) {</pre>
by <pre>  KUrl::List uriList = KUrl::List::fromMimeData( e-&gt;mimeData() );
  if ( !uriList.isEmpty() ) {</pre></li>
</ul>

<H4>KMD5</H4>

<H4>KLocale</H4>
<ul>
<li> QString formatNumber(const QString &amp;numStr) const -&gt;   QString formatNumber(const QString &amp;numStr, bool round=true, int precision=2) const;</li>
<li> bool weekStartsMonday() const -&gt; int weekStartDay() const</li>
<li> QString monthName(int i, bool shortName = false) const -&gt; QString KCalendarSystem::monthName (int month, int year, bool shortName = false) const = 0; or QString KCalendarSystem::monthName (const QDate &amp; date, bool shortName = false ) const = 0;<li>
<li> QString weekDayName(int i, bool shortName = false) const -&gt; calendar()-&gt;weekDayName<li>
<li> QString monthNamePossessive(int i, bool shortName = false) const -&gt; calendar()-&gt;monthNamePossessive()</li>
<li> void setWeekStartsMonday(bool start) -&gt; setWeekStartDay</li>
<li> languages() -&gt; languageList()</li>
<li> formatMoney(const QString &amp;numStr) -&gt;   QString formatMoney(double num, const QString &amp; currency = QString::null, int digits = -1) const;</li>
<li> charset() -&gt; gone</li>
<li> setCharset() -&gt; gone</li>
<li>removeCatalogue was renamed to removeCatalog</li>
</ul>

<H4>KCmdLineArgs</H4>
<ul>
<li>   static void init(int _argc, char **_argv, const char *_appname, const char *_description, const char *_version, bool noKApp = false) KDE_DEPRECATED; -&gt; static void init(int _argc, char **_argv, const char *_appname, const char* programName, const char *_description, const char *_version, bool noKApp = false);
<li> noKApp parameter is gone, instead:   Q_FLAGS(StdCmdLineArgs)</li>
</ul>

<H4>KCharsets</H4>
<ul>
<li>KCharsets::codecForName cannot use glibc's i18n data anymore currently</li>
<li><b>TODO</b>: see which member functions can be removed</li>
<li><b>TODO</b>: simplification of the encoding list tables
   (simply name and description, no need of two tables and an lists of aliases.</li>
</ul>

<H4>KWin</H4>
<ul>
<li>appStarted() removed, use KStartupInfo::appStarted() instead</li>
<li>info(WId win) removed, use windowInfo() instead</li>
<li>struct Info was removed, use WindowInfo instead</li>
</ul>

<H4>KNetwork::KResolver</H4>
<ul>
<li>the signal finished(KResolverResults) is now finished(const KNetwork::KResolverResults&amp;)</li>
</ul>

<H4>KVMAllocator</H4>
<ul>
<li>The two old copy methodes are removed, copyBlock equivalents are renamed to copy</li>
</ul>

<H4>KConfigGroupSaver</H4>
<p>
The class KConfigGroupSaver has been deprecated, instead use KConfigGroup. The
difference is a KConfigGroupSaver object direcly affects the config object it
is acting on, while a KConfigGroup object only ensures the entries read or
written through it are in the correct group.</p>
Instead of:
<pre>
KConfig *config = KGlobal::config();
KConfigGroupSaver saver(config, "group name");
	...
config-&gt;readXXX("entry name");
</pre>
should be rewritten as:
<pre>
KConfig *config = KGlobal::config();
KConfigGroup cg(config, "group name");
	...
cg.readXXX("entry name");
</pre>

<H4 ALIGN="RIGHT"><A HREF="#TOC">Return to the Table of Contents</A></H4>

<H3><A NAME="kdeui">Changes in kdeui</A></H3>
<ul>
<li>kcolordlg.h went away, use kcolordialog.h</li>
<li>kcolorbtn.h went away, use kcolorbutton.h</li>
<li>kdatapik.h went away, use kdatepicker.h</li>
<li>kdualcolorbtn.h went away, use kdualcolorbutton.h</li>
<li>kxmlgui.h went away, use kxmlguifactory.h</li>
</ul>

<H4>KSeperator</H4>
<ul>
<li>KSeperator now uses Qt::Vertical and Qt::Horizontal rather then QFrame's HFrame and VFrame.</li>
</ul>

<H4>KCharSelectTable</H4>
<ul>
<li>there is no separation between focused and selected item anymore, only between selected and activated</li>
<li>focusItemChanged is no emitted with the currently selected/focused character, not with the most recent activated one</li>
<li>signal highlighted(...) has been removed</li>
<li> protected memgers gotoleft/right/up/down are gone, if you really need to simulate them, use the qitemselectionmodel</li>
</ul>

<H4>KColorDrag</H4>
<ul>
<li>has been moved as K3ColorDrag to kde3support</li>
<li>use QMimeData  direcly instead or KColorMimeData, which resambles most of KColorDrag</li>
</ul>

<H4>KAction</H4>
<ul>
<li>void activated( KAction::ActivationReason reason, Qt::ButtonState state ); -&gt; void activated( KAction::ActivationReason reason, Qt::MouseButtons buttons, Qt::KeyboardModifiers modifiers );</li>
<li>void setStatusText(const QString &amp;text) was depricated during KDE3. Instead use void setToolTip(const QString &amp;test)</li>
<li>Don't use setIconSet anymore, use setIcon instead, there is no compatibility class or function</li>
</ul>

<H4>KActionSelector</H4>
<ul>
<li>Q3ListBox -&gt; QListWidget</li>
<li>selectedListBox  -&gt;  selectedListWidget</li>
<li>availableListBox  -&gt;  availableListWidget</li>
</ul>

<H4>KRootPixmap</H4>
<ul>
<li>checkAvailable() -&gt; isAvailable()</li>
</ul>

<H4>KURLLabel</H4>
<ul>
<li>renamed to KUrlLabel</li>
</ul>

<H4>KConfigDialog</H4>
<ul>
    <li>The dialog name is now a QString instead of a const char*</li>
    <li>signal void settingsChanged(const char *dialogName); -&gt; void settingsChanged(const QString&amp; dialogName);</li>
    <li>signal void settingsChanged(); has dissapeared use the signal with the parameter instead. If you don't need the parameter don't connect it, e.g <pre>connect(myDialog, SIGNAL(settingsChanged(const QString&amp;)), this, SLOT(mySlot()));</pre></li>
</ul>

<H4>KJanusWidget</H4>
<ul>
<li>Q3[HV]Box -&gt; K[HV]Box</li>
<li>usage of QFrame, instead of Q3Frame</li>
<li>Signal aboutToChangePage(QWidget*) is no longer possible with the new QStackedWidget; it has been replaced with currentPageChanged(QWidget*), the only difference being that it is emitted after the page has changed.</li>
<li>Removed name argument from the constructor.  Use setObjectName() instead, if needed.</li>
</ul>

<H4>KDialogBase</H4>
<ul>
<li>Most of usefull features have been moved to KDialog, KDialog is now probably enough for your need. Use KDialogBase only if you use the KJanusWidget</li>
<li>setButtonOKText, setButtonApplyText , setButtonCancelText  -&gt; setButtonGuiItem</li>
<li>getBackgroundTile -&gt; backgroundTile</li>
<li>getContentsRect -&gt; gone</li>
<li>getBorderWidths -&gt; gone</li>
<li>Q3[HV]Box -&gt; K[HV]Box</li>
<li>Signal aboutToChangePage(QWidget*) is no longer possible with the new QStackedWidget; it has been replaced with currentPageChanged(QWidget*), the only difference being that it is emitted after the page has changed.  If you need such a notification, you will have to subclass the QWidgets you add to the stack, and override show().</li>
<li>don't overide anymore slotFoo().  You now need to connect to FooClicked signal.   Or reimplement accept() and reject() to intercept the Ok and Cancel button</li>
<li>configDialogSize() -&gt; restoreDialogSize()  to be consistant with KMainWindow.  saveDialogSize() take now a KConfigBase* parametter
</ul>

<H4>KDatePicker</H4>
<ul>
<li>signal void dateChanged(QDate); was replaced by void dateChanged( const QDate&amp;);</li>
<li>signal void dateEntered(QDate); was replaced by void dateEntered( const QDate&amp;);</li>
<li>signal void dateSelected(QDate); was replaced by void dateSelected( const QDate&amp;)</li>
<li>changed the order of the constructor's parameter</li>
<li>removed getData() method.  Use date() instead</li>
<li>removed protected slot <tt>void selectWeekClicked()</tt></li>
</ul>

<H4>KDockWindow</H4>
<ul>
<li>This class is obsolete, it is provided for compatibility only.
Use KSystemTray instead.</li>
</ul>

<H4>KDateWidget</H4>
<ul>
<li>signal void changed(QDate); was changed by void changed(const QDate&amp;)</li>
</ul>

<H4>KDateTable</H4>
<ul>
<li>signal void dateChanged(QDate); was replaced by void dateChanged(const QDate&amp;);</li>
</ul>

<H4>KKeyDialog</H4>
<ul>
<li>removed KDE2 deprecated functions</li>
</ul>

<H4>KMainWindowInterface</H4>
<ul>
<li>functionsDynamic() now returns a DCOPCStringList</li>
<li>function processDynamic arguments uses DCOPCString instead of QCString :
	   <pre>bool processDynamic(const DCOPCString &amp;fun, const QByteArray &amp;data, DCOPCString&amp; replyType, QByteArray &amp;replyData);</pre></li>
<li>actions() now returns a DCOPCString</li>
</ul>

<H4>KMainWindow</H4>
<ul>
<li>getMemberList() was replaced by memberList() and memberList was renamed to mMemberList and made it private</li>
<li>sizeForCentralWidgetSize(QSize size) returned the size the mainwindow should have so that the central widget will be of size.  You normally don't need this, the recommended way to achieve a certain central widget size is as follows.<br>
 * Override sizeHint() in the central widget so that it returns the desired size.<br>
 * Call updateGeometry() in the central widget whenever the desired size changes. This ensures that the new sizeHint() is properly propagated to any parent layout.<br>
 * Now call adjustSize() in the mainwindow to resize the mainwindow such that the central widget will become the desired size.</li>
</ul>

<H4>KAboutDialog</H4>
<ul>
<li>void setIcon( const QString &amp;fileName ) which was deprecated has been removed</li>
<li>addContainerPage int args are now Qt::Alignment args</li>
<li>addScrolledContainerPage int args are now Qt::Alignment args</li>
<li>addContainer int args are now Qt::Alignment args</li>
</ul>

<H4>KAboutContainer</H4>
<ul>
<li>KAboutContainer constructor int args have been replaced by Qt::Alignment</li>
<li>addTitle int args replaced by Qt::Alignment</li>
<li>addImage int args replaced by Qt::Alignment</li>
</ul>

<H4>KRecentFilesAction</H4>
<ul>
<li>the maxItem property is now an int (was a uint) (affects all accessors methods)</li>
</ul>

<H4>KPasswdEdit</H4>
<ul>
<li>KPasswordEdit(QWidget *parent, const char *name, int echoMode) ; was deprecated</li>
</ul>

<H4>KPassivePopup</H4>
<ul>
<li>clicked single now emits a const QPoint reference</li>
</ul>

<H4>KPopupMenu</H4>
<ul>
<li>Renamed to KMenu to reflect change in Qt</li>
<li>indexes replaced by QAction*</li>
<li>title, titlePixmap, and changeTitle removed - use QAction::text(), QAction::icon(), QAction::setText() and QAction::setIcon</li>
<li>contextMenuFocusItem changed to contextMenuFocusAction in line with the change from indexes to actions</li>
</ul>

<H4>KPopupTitle</H4>
<ul>
<li>Removed - QMenu doesn't accept widgets, and QAction allows specification of font, icon etc... and gradients / background pixmaps weren't even working in KDE3</li>
</ul>

<H4>KStatusBar</H4>
<ul>
<li>The unused BarStatus enum was removed.</li>
</ul>

<H4>KEditListBox</H4>
<ul>
<li>void insertStrList(const QStrList* list, int index=-1) and void insertStrList(const QStrList&amp; list, int index=-1) have been deprecated, use QStringList or const char** instead</li>
</ul>

<H4>KEdit</H4>
<ul>
<li>The signal gotUrlDrop was removed, nobody used it, and it's easy to do in the application
if needed (see the KURLDrag section)</li>
</ul>

<H4>KTabBar</H4>
<ul>
<li>colors, close buttons on individual tabs not working at the moment</li>
<li>The old insertTab and removeTab have been removed, use addTab / insertTab / removeTab from QTabBar instead (uses indices, not QTab*s)</li>
</ul>

<H4>KTimeWidget</H4>
<ul>
<li>Removed, use QTimeEdit
</ul>

<H4>KNetwork::K*Socket</H4>
<ul>
<li>readBlock, writeBlock and peekBlock are now called simply read, write and peek</li>
<li>connect() now has an extra parameter (QIODevice::OpenMode)</li>
</ul>

<H4>KStdAction</H4>
<ul>
<li>showToolbar() methods have been removed, see KMainWindow::setStandardToolBarMenuEnabled()</li>
</ul>

<H4>KInputDialog</H4>
<ul>
<li>static QString KInputDialog::text( const QString &amp;caption,...) was replaced by QString KInputDialog::getText( const QString &amp;caption,...)</li>
</ul>

<h4>KToolBar</h4>
<ul>
<li><tt>enum BarStatus</tt> and <tt>bool enable(BarStatus stat)</tt> have been
removed</li>
<li><tt>void enableMoving(bool flag)</tt> and <tt>void enableFloating (bool
flag)</tt> have been removed in favor of <tt>setMovingEnabled(bool)</tt></li>
<li><tt>int maxHeight()/int maxWidth()</tt> removed in favor of
<tt>maximumHeight()/maximumWidth()</tt></li>
<li><tt>void setMaxHeight (int h)</tt> and <tt>void setMaxWidth (int dw)</tt>
removed in favor of <tt>setMaximumHeight()/setMaximumWidth()</tt></li>
</ul>

<h4>KToolBarButton</h4>
<ul>
<li>Don't use setIconSet anymore, use setIcon instead, there is no compatibility class or function</li>
</ul>

<h4>KPushButton</h4>
<ul>
<li>Don't use setIconSet anymore, use setIcon instead, there is no compatibility class or function</li>
</ul>

<h4>KGUIItem</h4>
<ul>
<li>Don't use setIconSet anymore, use setIcon instead, there is no compatibility class or function</li>
</ul>

<h4>KGUIItem</h4>
<ul>
<li>Don't use setIconSet anymore, use setIcon instead, there is no compatibility class or function</li>
</ul>

<h4>KLineEdit</h4>
<ul>
<li>void cursorAtEnd() removed, use QLineEdit::end(false) instead</li>
<li>unused protected slots removed: void slotAboutToShow() and void slotCancelled()</li>
</ul>

<h4>KLineEditDlg</h4>
<ul>
<li>Was deprecated, has been removed. Use KInputDialog instead.</li>
</ul>

<h4>KPasswordDialog</h4>
<ul>
<li>kpassdlg.h was renamed kpassworddialog.h.</li>
</ul>

<H4>KProgress</H4>
<ul>
<li>KProgress has been renamed to KProgressBar (#include &lt;kprogressbar.h&gt; instead of #include &lt;kprogress.h&gt;)</li>
<li>QProgressBar is mostly enough. KProgressBar only necessary if setFormat(const QString &amp; format) or advance(int offset) is needed.</li>
<li>KProgressBar inherits from QProgressBar. QProgressBar has changed a lot in Qt4 ( setTotalSteps(totalSteps) -&gt; setRange(0, totalSteps), setProgress -&gt; setValue, percentageChanged -&gt; valueChanged ). For more details see QProgressBar class reference.</li>
</ul>

<H4>KProgressDialog</H4>
<ul>
<li>#include &lt;kprogressdialog.h&gt; instead of #include &lt;kprogress.h&gt;</li>
<li>See KProgress API changes</li>
</ul>

<h4>KTextBrowser</h4>
<ul>
		<li>Inherits form QTextBrowser instead of Q3TextBrowser</li>
</ul>

<h4>KSyntaxHighlighter</h4>
<ul>
		<li>Use K3SyntaxHighlighter because it used Q3TextEdit or use KSyntaxHighlighter when your appli will use QTextEdit</li>
</ul>

<H4 ALIGN="RIGHT"><A HREF="#TOC">Return to the Table of Contents</A></H4>

<H3><A NAME="kio">Changes in kio</A></H3>

<H4>KIO::UDSEntry</H4>
<ul>
<li>UDSEntry is now a hash instead of a list. Use the methods stringValue()
and numberValue() to retrieve fields directly, no loop is needed anymore.
See the UDSEntry documentation for code examples.</li>
<li>Also note that UDSEntryListConstIterator is now UDSEntryList::ConstIterator;
see the UDSEntryList documentation for a full code example of iterating through
a listDir result.</li>
<li>For kioslaves: replace every three lines like
 <pre>atom.m_uds = KIO::UDS_SIZE;
      atom.m_long = buff.st_size;
      entry.append( atom );</pre>
  with the line <pre>entry.insert( KIO::UDS_SIZE, buff.st_size );</pre></li>
</ul>

<H4>KFileItemList</H4>
<ul>
  <li>KFileItemList has been ported from QPtrList to QList. This means you
      have to iterate using either integers or java-style or stl iterators.
      Here's the stl version:
   <pre>
    KFileItemList::const_iterator kit = list.begin();
    const KFileItemList::const_iterator kend = list.end();
    for ( ; kit != kend; ++kit )
       ...
    </pre></li>
   <li>Note however that no loop is necessary anymore for finding an item by name (use findByName), finding an item by URL (use findByURL) or making a list of all urls (use urlList).</li>
</ul>

<H4>KIO:: global methods</H4>
<ul>
    <li>KIO::convertSizeFromKB is now KIO::convertSizeFromKiB since it takes a value in KiB (1 KiB = 1024 B)</li>
</ul>

<H4>KIO::Job</H4>
<ul>
   <li>For Job subclasses: removeSubjob doesn't terminate the parent job anymore, add
         <code>if ( !hasSubjobs() ) emitResult();</code> to emulate the old behavior that.</li>
   <li>subjobs is now private. This means you should replace subjobs.remove(job) with removeSubjob(job),
   and subjobs.isEmpty() with !hasSubjobs()</li>
</ul>

<H4>KFileMetaInfo</H4>
<ul>
    <li>KFileMetaInfo::KiloBytes has been renamed KFileMetaInfo::KibiBytes (1 KiB = 1024 B)</li>
</ul>

<H4>KRun</H4>
<ul>
<li>the constructor needs a second parameter (a widget) now</li>
</ul>

<H4>PasswordDialog</H4>
<ul>
		<li>void setEnableUserField( bool enable, bool=false ) removed use :setUserReadOnly( !enable )</li>
</ul>

<H4>KIconButton</H4>
<ul>
		<li>signal void iconChanged(QString); replaced by void iconChanged(const QString &gt;);</li>
</ul>

<H4>KIconDialog</H4>
<ul>
		<li>signal void newIconName(QString); replaced by void newIconName(const QString &gt;);</li>
</ul>

<H4>UIServer</H4>
<ul>
		<li>QByteArray openPassDlg( const KIO::AuthInfo &gt;info ); removed. Use KIO::PasswordDialog::getNameAndPassword</li>
</ul>

<H4>RenameDlg</H4>
<ul>
<li>void b0Pressed() renamed to void cancelPressed()</li>
<li>void b1Pressed() renamed to void renamePressed()</li>
<li>void b2Pressed() renamed to void skipPressed()</li>
<li>void b3Pressed() renamed to void autoSkipPressed()</li>
<li>void b4Pressed() renamed to void overwritePressed()</li>
<li>void b5Pressed() renamed to void overwriteAllPressed()</li>
<li>void b6Pressed() renamed to void resumePressed()</li>
<li>void b7Pressed() renamed to void resumeAllPressed()</li>
<li>void b8Pressed() renamed to void suggestNewNamePressed()</li>
</ul>

<H4>KURLCombo</H4>
<ul>
<li>Renamed to KUrlCombo</li>
<li>All usage of QPixmap has been replaced by usage of QIcon</li>
<li>getPixmap() --&gt; getIcon()</li>
</ul>

<H4>KURLCompletion</H4>
<ul>
<li>Renamed to KUrlCompletion</li>
</ul>

<H4>KURLPixmapProvider</H4>
<ul>
<li>Renamed to KUrlPixmapProvider</li>
</ul>

<H4>KMimeType</H4>
<ul>
<li>iconForURL has been deprecated, will possily removed for KDE 4.0 final, use iconNameForURL instead</li>
</ul>

<H4>KArchive/KTar/KZip/KAr</H4>
<ul>
<li>All sizes and file offsets now use qint64 (similar to QIODevice)</li>
<li>The API has changed for subclasses: writeDir is doWriteDir, prepareWriting is doPrepareWriting etc.</li>
<li>API changes for users of the class: doneWriting was renamed to finishWriting, and 
   the order of the arguments for writeFile() is more usual: data comes before size.</li>
<li>KTarDirectory -&gt; KArchiveDirectory</li>
<li>KTarFile -&gt; KArchiveFile</li>
<li>KTarEntry -&gt; KArchiveEntry</li>
<li>KTarGz -&gt; KTar</li>
</ul>

<H4>KURLRequester</H4>
<ul>
<li>renamed to KUrlRequester</li>
<li>setCaption is gone, use setWindowTitle instead</li>
</ul>

<H4>KURLBar</H4>
<ul>
<li>renamed to KUrlBar</li>
</H4>

<H4>KFileDialog</H4>
<ul>
<li>void toolbarCallback(int) was removed</li>
<li>void pathComboChanged( const QString&amp; ); was removed</li>
<li>void dirCompletion( const QString&amp; ); was removed</li>
<li>void setFilterMimeType(const QString &amp;label, const KMimeType::List &amp;types, const KMimeType::Ptr &amp;defaultType) was removed</li>
<li>void setPreviewWidget(const QWidget *w) was removed</li>
<li>void updateStatusLine(int dirs, int files); was removed</li>
</ul>

<h4>KFileOpenWithHandler</h4>
<ul>
<li>This class has been removed, it was just a workaround for a dependency problem,
just remove any instance of it.</li>
</ul>

<H4>KBookmark classes</H4>
<ul>
<li>KBookmarkDrag class has been moved to kde3support. Use KBookmark::populateMimeData() and
KBookmark::List::populateMimeData() in the drag/copy side,
and the static methods KBookmark::List::canDecode() and KBookmark::List::fromMimeData()
in the drop/paste side.</li>
</ul>

<H4 ALIGN="RIGHT"><A HREF="#TOC">Return to the Table of Contents</A></H4>

<H3><A NAME="kparts">Changes in kparts</A></H3>

<H3>ComponentFactory</H3>
<ul>
<li>createInstanceFromFactory is now KLibFactory::create&lt;T&gt;</li>
<li>createInstanceFromLibrary is now KLibLoader::createInstance&lt;T&gt;</li>
</ul>

<H4>BrowserRun</H4>
<ul>
<li>BrowserRun::isExecutable obsoleted by KRun::isExecutable</li>
</ul>

<H4 ALIGN="RIGHT"><A HREF="#TOC">Return to the Table of Contents</A></H4>

<H3><A NAME="kded">Changes in kded</A></H3>

A library, libkdedmodule, is now provided so that kded modules can link to the
code they need and link without undefined symbols.
A number of apparently unused KDEDModule methods have been commented out, contact
kde-core-devel if you need those after all.

<H4 ALIGN="RIGHT"><A HREF="#TOC">Return to the Table of Contents</A></H4>

<H3><A NAME="kspell">Changes in kspell</A></H3>

<H4>KSpell</H4>

<H4 ALIGN="RIGHT"><A HREF="#TOC">Return to the Table of Contents</A></H4>

<H3><A NAME="khtmlpart">API-cleanups in KHTML</A></H3>

<H4 ALIGN="RIGHT"><A HREF="#TOC">Return to the Table of Contents</A></H4>

<H3><A NAME="kfile">Changes in kfile</A></H3>

<H4 ALIGN="RIGHT"><A HREF="#TOC">Return to the Table of Contents</A></H4>

<H3><A NAME="kcontrol">Changes in KControl</A></H3>
<ul>
<li>KCModule does no longer take a name argument, but directly a KInstance (having the correct
   name for the translations to work.</li>
</ul>

<H4 ALIGN="RIGHT"><A HREF="#TOC">Return to the Table of Contents</A></H4>

<H3><A NAME="kicker">Panel Applets and Extensions</A></H3>

<H4 ALIGN="RIGHT"><A HREF="#TOC">Return to the Table of Contents</A></H4>


<ul>
<li>KDockWidgets -&gt; kde3support K3DockWidget</li>
<li>KParts::DockWindow -&gt; kde3support KParts::DockWindow3</li>
<li>KMDI* --&gt; kdeSupport K3MDI*</li>
</ul>

<H3>libkmid</H3>
<ul>
<li>Moved to kdemultimedia, where atm it is only used by kmid.</li>
</ul>

<H3><A NAME="kscreensaver">KScreensaver</A></H3>

<H3>libkscreensaver</H3>
<ul>
<li>Moved to kdebase/workspace/kscreensaver</li>
</ul>

</BODY>
</HTML>
