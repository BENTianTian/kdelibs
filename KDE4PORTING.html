<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML Level 2//EN//2.0">
<HTML>
<HEAD>
	<TITLE>Guide to Porting Applications to KDE 4.0</TITLE>
</HEAD>
<BODY>

<H2>Porting Applications to KDE 4.0</H2>
This document contains the changes you have to apply to programs written for
KDE 3.x when you want to port them to KDE 4.0.<P>

As a start you should have a look at doc/porting.doc in the Qt package,
or <a href="http://doc.trolltech.com/4.0/porting4.html">this page online</a>.<P>

<H3><A NAME="TOC">Table of Contents</A></H3>

<UL>
<LI><A HREF="#gettingstarted">Getting Started</A></LI>
<LI><A HREF="#kab">Changes in kab</A></LI>
<LI><A HREF="#kdecore">Changes in kdecore</A></LI>
<LI><A HREF="#kdeui">Changes in kdeui</A></LI>
<LI><A HREF="#kio">Changes in kio</A></LI>
<LI><A HREF="#kparts">Changes in kparts</A></LI>
<LI><A HREF="#kspell">Changes in kspell</A></LI>
<LI><A HREF="#khtmlpart">API-cleanup in KHTML</A></LI>
<LI><A HREF="#kfile">Changes in kfile</A></LI>
<LI><A HREF="#kcontrol">KDE Control Center</A></LI>
<LI><A HREF="#kicker">Panel Applets and Extensions</A></LI>
</UL>

<H3><A NAME="gettingstarted">Getting started</A></H3>

<H4><P ALIGN="RIGHT"><A HREF="#TOC">Return to the Table of Contents</A></P></H4>

<H3><A NAME="kab">Changes in kab</A></H3>


<H4><P ALIGN="RIGHT"><A HREF="#TOC">Return to the Table of Contents</A></P></H4>

<H3><A NAME="kdecore">Changes in kdecore</A></H3>

<H4>Header file names</H4>
<UL>
  kuniqueapp.h => kuniqueapplication.h
</UL>

<H4>DCOP</H4>

<H4>KCodecs</H4>
<li>All methods using a Q(3)CString removed. The methods use QByteArray (and thus Q3CStrings) now. </li>
<li><b>TODO:</b> Rename header to match classname.</li>

<H4>KLibFactory</H4>

<H4>KDesktopFile</H4>

<H4>KPixmapSplitter</H4>

<H4>KRegExp</H4>
<li>This class has been removed.  Use QRegExp instead</li>

<H4>KStringHandler</H4>

<H4>KStyle</H4>

<H4>KURL</H4>

<H4>KMD5</H4>

<H4>KLocale</H4>

<H4>KCharsets</H4>
<p>Most of this class is (probably) obsolete, consider removing that class</p>

<H4>KWin</H4>
<li>appStarted() removed, use KStartupInfo::appStarted() instead</li>
<li>info(WId win) removed, use windowInfo() instead</li>
<li>struct Info was removed, use WindowInfo instead</li>

<H4><P ALIGN="RIGHT"><A HREF="#TOC">Return to the Table of Contents</A></P></H4>

<H3><A NAME="kdeui">Changes in kdeui</A></H3>

<H4>KDatePicker</H4>

<li>signal void dateChanged(QDate); was replaced by void dateChanged( const QDate&amp;);
<li>signal void dateEntered(QDate); was replaced by void dateEntered( const QDate&amp;);
<li>signal void dateEntered(QDate) was replaced by void dateEntered( const QDate&amp;)
<li>removed getData() method.  Use date() instead</li>

<H4>KDateWidget</H4>
<li>signal void changed(QDate); was changed by void changed(const QDate&amp;)

<H4>KDateTable</H4>
<li>signal void dateChanged(QDate); was replaced by void dateChanged(const QDate&amp;);

<H4>KMainWindowInterface</H4>
<li>functionsDynamic() now returns a DCOPCStringList
<li>function processDynamic arguments uses DCOPCString instead of QCString :
	   <pre>bool processDynamic(const DCOPCString &amp;fun, const QByteArray &amp;data, DCOPCString&amp; replyType, QByteArray &amp;replyData);</pre>
<li>actions() now returns a DCOPCString

<H4>KAboutDialog</H4>
<li>void setIcon( const QString &amp;fileName ) which was deprecated has been removed
<li>addContainerPage int args are now Qt::Alignment args
<li>addScrolledContainerPage int args are now Qt::Alignment args
<li>addContainer int args are now Qt::Alignment args

<H4>KAboutContainer</H4>
<li>KAboutContainer constructor int args have been replaced by Qt::Alignment
<li>addTitle int args replaced by Qt::Alignment
<li>addImage int args replaced by Qt::Alignment

<H4>KRecentFilesAction</H4>
<li>the maxItem property is now an int (was a uint) (affects all accessors methods)

<H4>KPasswdEdit</H4>
<li>KPasswordEdit(QWidget *parent, const char *name, int echoMode) ; was deprecated

<H4>KPopupMenu</H4>
<li>Renamed to KMenu to reflect change in Qt</li>
<li>indexes replaced by QAction*</li>
<li>title, titlePixmap, and changeTitle removed - use QAction::text(), QAction::icon(), QAction::setText() and QAction::setIcon</li>
<li>contextMenuFocusItem changed to contextMenuFocusAction in line with the change from indexes to actions</li>

<H4>KPopupTitle</H4>
<li>Removed - QMenu doesn't accept widgets, and QAction allows specification of font, icon etc... and gradients / background pixmaps weren't even working in KDE3</li>

<H4>KEditListBox</H4>
<li>void insertStrList(const QStrList* list, int index=-1) and void insertStrList(const QStrList&amp; list, int index=-1) have been deprecated, use QStringList or const char** instead</li>

<H4>KTabBar</H4>
<li>colors, close buttons on individual tabs not working at the moment</li>
<li>The old insertTab and removeTab have been removed, use addTab / insertTab / removeTab from QTabBar instead (uses indices, not QTab*s)</li>

<H4>KNetwork::K*Socket</H4>
<li>readBlock, writeBlock and peekBlock are now called simply read, write and peek</li>
<li>connect() now has an extra parameter (QIODevice::OpenMode)</li>

<H4>KStdAction</H4>
<li>showToolbar() methods have been removed, see KMainWindow::setStandardToolBarMenuEnabled()</li>

<H4><P ALIGN="RIGHT"><A HREF="#TOC">Return to the Table of Contents</A></P></H4>



<H3><A NAME="kio">Changes in kio</A></H3>


<H4><P ALIGN="RIGHT"><A HREF="#TOC">Return to the Table of Contents</A></P></H4>

<H3><A NAME="kparts">Changes in kparts</A></H3>


<H4><P ALIGN="RIGHT"><A HREF="#TOC">Return to the Table of Contents</A></P></H4>

<H3><A NAME="kspell">Changes in kspell</A></H3>

<H4>KSpell</H4>

<H4><P ALIGN="RIGHT"><A HREF="#TOC">Return to the Table of Contents</A></P></H4>

<H3><A NAME="khtmlpart">API-cleanups in KHTML</A></H3>

<H4><P ALIGN="RIGHT"><A HREF="#TOC">Return to the Table of Contents</A></P></H4>

<H3><A NAME="kfile">Changes in kfile</A></H3>

<H4><P ALIGN="RIGHT"><A HREF="#TOC">Return to the Table of Contents</A></P></H4>


<p>


<H3><A NAME="kcontrol">Changes in KControl</A></H3>


<H4><P ALIGN="RIGHT"><A HREF="#TOC">Return to the Table of Contents</A></P></H4>
<p>

<H3><A NAME="kicker">Panel Applets and Extensions</A></H3>

<H4><P ALIGN="RIGHT"><A HREF="#TOC">Return to the Table of Contents</A></P></H4>
<p>

</BODY>
</HTML>
